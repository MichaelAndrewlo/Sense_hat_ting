from sense_hat import SenseHat
from random import randint
from time import sleep
sense = SenseHat()


red = (255, 0, 0)
green = (0, 255, 0)
blue = (0, 0, 255)
yellow = (255, 255, 0)
gray = (183, 183, 183)
black = (0, 0, 0)
pink = (255, 0, 255)
orange = (255, 153, 0)
white = (255, 255, 255)
player_colours = [blue, green]


player_positions = [[0, 0], [7, 7]]
weapon_positions = [[0, 2], [7, 5]]
player = 0
dead = False
winner = ''

def check_position(position):
	while position >= 8:
		position -= 1
	while position <= -1:
		position += 1
	return position
	
def is_dead():
	global player_positions
	global weapon_positions
	global dead
	global winner
	if player_positions[0] == weapon_positions[1]:
		dead = True
		winner = 'player 2'
	elif player_positions[1] == weapon_positions[0]:
		dead = True
		winner = 'player 1'

def move(direction):
	global current_player_x
	global current_player_y
	if direction == 'up':
		current_player_y -= 1
	elif direction == 'down':
		current_player_y += 1
	elif direction == 'left':
		current_player_x -= 1
	elif direction == 'right':
		current_player_x += 1
	current_player_x = check_position(current_player_x)
	current_player_y = check_position(current_player_y)

def weapon(direction):
	global current_player_x
	global current_player_y
	global current_weapon_x
	global current_weapon_y
	if direction == 'up':
		current_weapon_y = current_player_y - 2
		current_weapon_x = current_player_x
	elif direction == 'down':
		current_weapon_y = current_player_y + 2
		current_weapon_y = current_player_y
	elif direction == 'left':
		current_weapon_x = current_player_x - 2
		current_weapon_y = current_player_y
	elif direction == 'right':
		current_weapon_x = current_player_x + 2
		current_weapon_y = current_player_y
	current_weapon_x = check_position(current_weapon_x)
	current_weapon_y = check_position(current_weapon_y)

def update_positions():
	global current_player_x
	global current_player_y
	global current_weapon_x
	global current_weapon_y
	global player_positions
	global current_positions
	global player
	player_positions[player] = [current_player_x, current_player_y]
	weapon_positions[player] = [current_weapon_x, current_weapon_y]

def update_display():
	global current_player_x
	global current_player_y
	global current_weapon_x
	global current_weapon_y
	global starting_player_x
	global starting_player_y
	global starting_weapon_x
	global starting_weapon_y
	global player
	global player_colours
	global black
	global red
	sense.set_pixel(starting_player_x, starting_player_y, black)
	sense.set_pixel(starting_weapon_x, starting_weapon_y, black)
	sense.set_pixel(current_player_x, current_player_y, player_colours[player])
	sense.set_pixel(current_weapon_x, current_weapon_y, red)

def switch_player(player):
	if player == 0:
		return 1
	elif player == 1:
		return 0

while not dead:
	current_player_positions = player_positions[player]
	current_player_x = current_player_positions[0]
	current_player_y = current_player_positions[1]
	current_weapon_positions = weapon_positions[player]
	current_weapon_x = current_weapon_positions[0]
	current_weapon_y = current_weapon_positions[1]
	
	starting_player_x = current_player_x
	starting_player_y = current_player_y
	starting_weapon_x = current_weapon_x
	starting_weapon_y = current_weapon_y
	
	is_dead()
	for event in sense.stick.get_events():
		if event.action == 'pressed':
			move(event.direction)
			weapon(event.direction)
			break
	update_positions()
	update_display()
	player = switch_player(player)
print(winner)
